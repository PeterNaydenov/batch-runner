"use strict";module.exports=function(){const n=new Map,t=Symbol("missing");function e(e){let{name:o,source:i,job:r,final:f}=e;return null==i&&(i=()=>t),null==f&&(f=()=>t),"string"==typeof o&&("function"==typeof i&&("function"==typeof r&&("function"==typeof f&&(n.set(o,{name:o,source:i,job:r,final:f}),!0))))}return{define:e,run:function(o,...i){if("string"!=typeof o){const{name:n}=o;e(o),o=n}const r=n.get(o);if(null==r)return[];const{source:f,job:s,final:u}=r,l=Symbol("end___"),c=[];let p=f(...i||[]);p===t&&(p=[void 0]),void 0!==p&&p.hasOwnProperty("length")&&"string"!=typeof p||(p=[p]);for(let[n,t]of p.entries()){let e=s({item:t,i:n,END:l},...i);if(e===l)break;c.push(e)}const a=u(c,...i);return a!==t?a:c}}};
