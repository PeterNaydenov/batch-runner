function n(){const n=new Map,t=Symbol("missing");function e(e){let{name:o,source:i,job:f,final:r}=e;return null==i&&(i=()=>t),null==r&&(r=()=>t),"string"==typeof o&&("function"==typeof i&&("function"==typeof f&&("function"==typeof r&&(n.set(o,{name:o,source:i,job:f,final:r}),!0))))}return{define:e,run:function(o,...i){if("string"!=typeof o){const{name:n}=o;e(o),o=n}const f=n.get(o);if(null==f)return[];const{source:r,job:u,final:s}=f,l=Symbol("end___"),c=[];let a=r(...i||[]);a===t&&(a=[void 0]),void 0!==a&&a.hasOwnProperty("length")&&"string"!=typeof a||(a=[a]);for(let[n,t]of a.entries()){let e=u({item:t,i:n,END:l},...i);if(e===l)break;c.push(e)}const p=s(c,...i);return p!==t?p:c}}}export{n as default};
